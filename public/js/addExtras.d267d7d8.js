(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["addExtras"],{2684:function(e,t,r){"use strict";var a=r("85c1"),o=r.n(a);o.a},"51be":function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o});var a="//localhost:4000",o="";a="//pos.migaox.com",o="http://pos.migaox.com/img/"},6033:function(e,t,r){"use strict";var a=r("a4f4"),o=r.n(a);o.a},"85c1":function(e,t,r){},a4f4:function(e,t,r){},cc54:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header_container"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/manage/home"}}},[e._v("首页")]),e._l(e.$route.meta,function(t,a){return r("el-breadcrumb-item",{key:a},[e._v(e._s(t))])})],2),r("el-dropdown",{attrs:{"menu-align":"start"},on:{command:e.handleCommand}},[r("img",{staticClass:"avator",attrs:{src:e.imgBaseUrl+e.userInfo.avatar}}),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"home"}},[e._v("首页")]),r("el-dropdown-item",{attrs:{command:"signout"}},[e._v("退出")])],1)],1)],1)},o=[],n=r("cebc"),s=r("51be"),c=r("2f62"),i={data:function(){return{imgBaseUrl:s["b"]}},created:function(){},computed:Object(n["a"])({},Object(c["d"])(["userInfo"])),methods:Object(n["a"])({},Object(c["c"])(["RESET_STATE"]),{handleCommand:function(e){var t=this;"home"==e?this.$router.push("/home"):"signout"==e&&this.$confirm("是否退出?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"退出成功"}),window.localStorage.clear(),t.RESET_STATE(),t.$router.push("/")}).catch(function(e){})}})},l=i,u=(r("6033"),r("2877")),m=Object(u["a"])(l,a,o,!1,null,null,null);t["a"]=m.exports},e63b:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("head-top"),r("el-row",{staticStyle:{"margin-top":"80px"}},[r("el-col",{attrs:{span:14,offset:4}},[r("header",{staticClass:"form_header"},[e._v("选择额外种类")]),r("el-form",{ref:"categoryForm",staticClass:"form",attrs:{model:e.categoryForm,rules:e.categoryRules,"label-width":"110px"}},[r("el-row",{staticClass:"category_select"},[r("el-form-item",{attrs:{label:"种类",prop:"name"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.selectValue.label},model:{value:e.categoryForm.categorySelect,callback:function(t){e.$set(e.categoryForm,"categorySelect",t)},expression:"categoryForm.categorySelect"}},e._l(e.categoryForm.categoryList,function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[r("span",[e._v(e._s(t.label))]),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"},on:{click:function(r){return e.handleDelete(t)}}},[e._v("X")])])}),1)],1)],1),r("el-row",{staticClass:"add_category_row",class:e.showAddCategory?"showEdit":""},[r("div",{staticClass:"add_category"},[r("el-form-item",{attrs:{label:"种类",prop:"name"}},[r("el-input",{model:{value:e.categoryForm.name,callback:function(t){e.$set(e.categoryForm,"name",t)},expression:"categoryForm.name"}})],1),r("el-form-item",{attrs:{label:"描述",prop:"description"}},[r("el-input",{model:{value:e.categoryForm.description,callback:function(t){e.$set(e.categoryForm,"description",t)},expression:"categoryForm.description"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitExtraCategoryForm("categoryForm")}}},[e._v("提交")])],1)],1)]),r("div",{staticClass:"add_category_button",on:{click:e.addCategoryFun}},[e.showAddCategory?r("i",{staticClass:"el-icon-caret-top edit_icon"}):r("i",{staticClass:"el-icon-caret-bottom edit_icon",attrs:{slot:"icon"},slot:"icon"}),r("span",[e._v("添加额外种类")])])],1),r("header",{staticClass:"form_header"},[e._v("添加额外")]),r("el-form",{ref:"extraForm",staticClass:"form food_form",attrs:{model:e.extraForm,rules:e.foodRules,"label-width":"110px"}},[r("el-form-item",{attrs:{label:"额外名称",prop:"name"}},[r("el-input",{model:{value:e.extraForm.name,callback:function(t){e.$set(e.extraForm,"name",t)},expression:"extraForm.name"}})],1),r("el-form-item",{attrs:{label:"额外详情",prop:"description"}},[r("el-input",{model:{value:e.extraForm.description,callback:function(t){e.$set(e.extraForm,"description",t)},expression:"extraForm.description"}})],1),r("el-form-item",{attrs:{label:"价格"}},[r("el-input-number",{attrs:{precision:2,step:.1,max:1e3},model:{value:e.extraForm.price,callback:function(t){e.$set(e.extraForm,"price",t)},expression:"extraForm.price"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addExtra("extraForm")}}},[e._v("确认添加")])],1)],1)],1)],1),r("el-dialog",{attrs:{title:"提示",visible:e.dialogDeleteVisible,width:"30%",center:""},on:{"update:visible":function(t){e.dialogDeleteVisible=t}}},[r("span",[e._v('删除"'+e._s(e.currentCategory.name)+'"类目,将删除类目下的所有选项,确定要删除吗?')]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogDeleteVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"danger"},on:{click:e.confirmDeleteButton}},[e._v("删 除")])],1)])],1)},o=[],n=(r("7f7f"),r("96cf"),r("3b8d")),s=r("cebc"),c=r("cc54"),i=r("2f62"),l=r("aac5"),u=r("51be"),m={props:["menu"],data:function(){return{baseUrl:u["a"],imgBaseUrl:u["b"],restaurant_id:null,categoryForm:{categoryList:[],categorySelect:"",name:"",description:""},extraForm:{name:"",description:"",price:0},foodRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},categoryRules:{name:[{required:!0,message:"请选择类别",trigger:"blur"}]},showAddCategory:!1,currentCategory:{},dialogDeleteVisible:!1}},components:{headTop:c["a"]},created:function(){},mounted:function(){this.initData()},computed:Object(s["a"])({},Object(i["d"])(["userInfo","restaurantInfo"]),{selectValue:function(){return this.categoryForm.categoryList[this.categoryForm.categorySelect]||{}}}),methods:{initData:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l["n"])({restaurantId:this.userInfo.restaurantId});case 3:t=e.sent,t.data.map(function(e,t){e.value=t,e.label=e.name}),this.categoryForm.categoryList=t.data,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$message({type:"error",message:e.t0});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),addCategoryFun:function(){this.showAddCategory=!this.showAddCategory},submitExtraCategoryForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(r){var a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=18;break}return a={name:t.categoryForm.name,description:t.categoryForm.description,restaurantId:t.userInfo.restaurantId},e.prev=2,e.next=5,Object(l["c"])(a);case 5:return o=e.sent,e.next=8,t.initData();case 8:t.categoryForm.name="",t.categoryForm.description="",t.showAddCategory=!1,t.$message({type:"success",message:o.message}),e.next=16;break;case 14:e.prev=14,e.t0=e["catch"](2);case 16:e.next=20;break;case 18:return t.$message({type:"error",message:"请检查输入是否正确"}),e.abrupt("return",!1);case 20:case"end":return e.stop()}},e,null,[[2,14]])}));return function(t){return e.apply(this,arguments)}}())},addExtra:function(e){var t=this;this.selectValue.label?this.$refs[e].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(r){var a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=14;break}return a=Object(s["a"])({},t.extraForm,{extraCategoryId:t.selectValue.extraCategoryId,restaurantId:t.userInfo.restaurantId}),e.prev=2,e.next=5,Object(l["b"])(a);case 5:o=e.sent,t.$message({type:"success",message:o.message}),t.extraForm={name:"",description:"",price:0},e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](2);case 12:e.next=16;break;case 14:return t.$message({type:"error",message:"请检查输入是否正确"}),e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t){return e.apply(this,arguments)}}()):this.$message({type:"error",message:"请填写分类"})},handleDelete:function(e){this.currentCategory=e,this.dialogDeleteVisible=!0},confirmDeleteButton:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l["i"])({extraCategoryId:this.currentCategory.extraCategoryId});case 3:t=e.sent,this.$message({type:"success",message:t.message}),this.dialogDeleteVisible=!1,this.categoryForm.categorySelect="",this.categoryForm.name="",this.categoryForm.description="",this.initData(),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),this.$message({type:"error",message:e.t0.message});case 15:case"end":return e.stop()}},e,this,[[0,12]])}));function t(){return e.apply(this,arguments)}return t}()}},d=m,p=(r("2684"),r("2877")),g=Object(p["a"])(d,a,o,!1,null,null,null);t["default"]=g.exports}}]);
//# sourceMappingURL=addExtras.d267d7d8.js.map