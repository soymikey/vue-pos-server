(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orderList"],{"49d6":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fillcontain"},[a("head-top"),a("div",{staticClass:"table_container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":function(t){return t.orderId}}},[a("el-table-column",{attrs:{label:"订单 ID",prop:"orderId"}}),a("el-table-column",{attrs:{label:"总价格",prop:"totalAmount"}}),a("el-table-column",{attrs:{label:"订单日期",prop:"createdDate"}}),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return t.handleView(e.row)}}},[t._v("查看")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"Pagination",staticStyle:{"text-align":"left","margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":20,layout:"total, prev, pager, next",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t.dialogFormVisible?a("el-dialog",{attrs:{title:"订单详情",visible:t.dialogFormVisible,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"order-title-box"},[a("div",{staticClass:"order-title-name"},[t._v("商品")]),a("div",{staticClass:"order-title"},[t._v("数量")]),a("div",{staticClass:"order-title"},[t._v("价格")])]),t._l(t.currentRow.basket.group,function(e,r){return a("div",{key:r},[a("div",{staticClass:"order-item-box"},[a("div",{staticClass:"order-item-title"},[t._v(t._s(e[0].nameWithSpecs)+"\n\n                "),e[0].extra.length?a("div",{staticClass:"order-item-tags"},t._l(e[0].extra,function(e,r){return a("el-tag",{key:r,attrs:{size:"medium"}},[t._v(t._s(e.name))])}),1):t._e()]),a("div",{staticClass:"order-item"},[t._v(t._s(e[0].num))]),a("div",{staticClass:"order-item"},[t._v(t._s(e[0].price*e[0].num))])])])}),a("div",{staticClass:"order-summary-box"},[a("div",{staticClass:"order-summary"},[a("span",{staticClass:"title"},[t._v("接单员:")]),t._v(t._s(t.currentRow.userInfo.userName))]),a("div",{staticClass:"order-summary-quantity"},[a("span",{staticClass:"title"},[t._v(" 数量:")]),t._v(t._s(t.currentRow.totalQuantity))]),a("div",{staticClass:"order-summary-price"},[a("span",{staticClass:"title"},[t._v("总价:")]),t._v(t._s(t.currentRow.totalAmount))])]),a("div",{staticClass:"button-container"},[a("el-button",{attrs:{size:"medium ",type:"primary"},on:{click:function(e){return t.print(t.scope.row)}}},[t._v("打印")])],1)],2)],1)],1):t._e(),a("el-dialog",{attrs:{title:"提示",visible:t.dialogDeleteVisible,width:"30%",center:""},on:{"update:visible":function(e){t.dialogDeleteVisible=e}}},[a("span",[t._v("确定要删除"+t._s(t.currentRow.orderId)+"订单吗?")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogDeleteVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"danger"},on:{click:t.confirmDeleteButton}},[t._v("删 除")])],1)])],1)],1)},n=[],i=(a("ac6a"),a("96cf"),a("3b8d")),s=a("cebc"),o=a("bd86"),c=a("cc54"),l=a("2f62"),u=(a("f2fc"),a("aac5")),d={data:function(){return Object(o["a"])({tableData:[],currentRow:null,offset:0,limit:20,count:0,currentPage:1,restaurantId:null,userId:null,dialogFormVisible:!1,dialogDeleteVisible:!1},"currentRow",{})},components:{headTop:c["a"]},created:function(){},mounted:function(){this.initData()},computed:Object(s["a"])({},Object(l["d"])(["userInfo","restaurantInfo"])),methods:{initData:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["q"])({restaurantId:this.userInfo.restaurantId,offset:this.offset,limit:this.limit});case 2:e=t.sent,this.tableData=e.data,this.count=e.count;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handleSizeChange:function(t){console.log("每页 ".concat(t," 条"))},handleCurrentChange:function(t){this.currentPage=t,this.offset=(t-1)*this.limit,this.getOrders()},getOrders:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,getOrderList({offset:this.offset,limit:this.limit,restaurant_id:this.userInfo.restaurantId});case 2:e=t.sent,this.tableData=[],e.forEach(function(t,e){var r={};r.total_amount=t.total_amount,r.status=t.status_bar.title,r.id=t.id,r.date=t.formatted_created_at,r.basket=t.basket.group,a.tableData.push(r)});case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handleView:function(t){this.currentRow=t,this.dialogFormVisible=!0},handleDelete:function(t){this.currentRow=t,this.dialogDeleteVisible=!0},confirmDeleteButton:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u["k"])({orderId:this.currentRow.orderId});case 3:e=t.sent,this.$message({type:"success",message:e.message}),this.dialogDeleteVisible=!1,this.tableData=this.tableData.filter(function(t){return t.orderId!==a.currentRow.orderId}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),this.$message({type:"error",message:t.t0.message});case 12:case"end":return t.stop()}},t,this,[[0,9]])}));function e(){return t.apply(this,arguments)}return e}(),print:function(){console.log("print")}}},m=d,f=(a("5d80"),a("2877")),h=Object(f["a"])(m,r,n,!1,null,null,null);e["default"]=h.exports},"51be":function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"b",function(){return n});var r="//localhost:4000",n="";r="//pos.migaox.com",n="http://pos.migaox.com/img/"},"5d80":function(t,e,a){"use strict";var r=a("b961"),n=a.n(r);n.a},6033:function(t,e,a){"use strict";var r=a("a4f4"),n=a.n(r);n.a},a4f4:function(t,e,a){},b961:function(t,e,a){},cc54:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header_container"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/manage/home"}}},[t._v("首页")]),t._l(t.$route.meta,function(e,r){return a("el-breadcrumb-item",{key:r},[t._v(t._s(e))])})],2),a("el-dropdown",{attrs:{"menu-align":"start"},on:{command:t.handleCommand}},[a("img",{staticClass:"avator",attrs:{src:t.imgBaseUrl+t.userInfo.avatar}}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"home"}},[t._v("首页")]),a("el-dropdown-item",{attrs:{command:"signout"}},[t._v("退出")])],1)],1)],1)},n=[],i=a("cebc"),s=a("51be"),o=a("2f62"),c={data:function(){return{imgBaseUrl:s["b"]}},created:function(){},computed:Object(i["a"])({},Object(o["d"])(["userInfo"])),methods:Object(i["a"])({},Object(o["c"])(["RESET_STATE"]),{handleCommand:function(t){var e=this;"home"==t?this.$router.push("/home"):"signout"==t&&this.$confirm("是否退出?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"退出成功"}),window.localStorage.clear(),e.RESET_STATE(),e.$router.push("/")}).catch(function(t){})}})},l=c,u=(a("6033"),a("2877")),d=Object(u["a"])(l,r,n,!1,null,null,null);e["a"]=d.exports},cf05:function(t,e,a){t.exports=a.p+"img/logo.82b9c7a5.png"},f2fc:function(t,e,a){"use strict";a("7f7f"),a("ac4d"),a("8a81"),a("ac6a"),a("cf05")}}]);
//# sourceMappingURL=orderList.3fc51e59.js.map