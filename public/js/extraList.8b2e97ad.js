(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["extraList"],{8942:function(e,t,a){},"951b":function(e,t,a){"use strict";var n=a("8942"),r=a.n(n);r.a},"9ab2":function(e,t,a){"use strict";var n=a("b1ee"),r=a.n(n);r.a},"9c92":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fillcontain"},[a("head-top"),a("div",{staticClass:"table_container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"dragTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"extraId",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"额外ID",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.extraId))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"介绍"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.description))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"分类",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.categoryName))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"拖拽",width:"100"}},[[a("i",{staticClass:" iconfont icon-drag",staticStyle:{"font-size":"25px"}})]],2)],1),a("div",{staticClass:"Pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":20,layout:"total, prev, pager, next",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"修改额外信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.selectTable}},[a("el-form-item",{attrs:{label:"名称","label-width":"100px"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.selectTable.name,callback:function(t){e.$set(e.selectTable,"name",t)},expression:"selectTable.name"}})],1),a("el-form-item",{attrs:{label:"介绍","label-width":"100px"}},[a("el-input",{model:{value:e.selectTable.description,callback:function(t){e.$set(e.selectTable,"description",t)},expression:"selectTable.description"}})],1),a("el-form-item",{attrs:{label:"价格","label-width":"100px"}},[a("el-input-number",{attrs:{precision:2,step:.1,min:0,max:1e4},model:{value:e.selectTable.price,callback:function(t){e.$set(e.selectTable,"price",t)},expression:"selectTable.price"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateExtra}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"提示",visible:e.dialogDeleteVisible,width:"30%",center:""},on:{"update:visible":function(t){e.dialogDeleteVisible=t}}},[a("span",[e._v('确定要删除"'+e._s(e.currentRow.name)+'"吗?')]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogDeleteVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"danger"},on:{click:e.confirmDeleteButton}},[e._v("删 除")])],1)])],1)],1)},r=[],s=(a("7f7f"),a("ac4d"),a("8a81"),a("ac6a"),a("96cf"),a("3b8d")),i=a("cebc"),l=a("cc54"),o=a("2f62"),c=a("51be"),u=a("aa47"),d=a("aac5"),b={data:function(){return{baseUrl:c["a"],imgBaseUrl:c["b"],restaurant_id:null,city:{},offset:0,limit:20,count:0,tableData:[],currentPage:1,selectTable:{},dialogFormVisible:!1,menuOptions:[],selectMenu:{},selectIndex:null,specsForm:{specs:"",price:0},specsFormrules:{specs:[{required:!0,message:"请输入规格",trigger:"blur"}]},specsFormVisible:!1,listLoading:!0,sortable:null,dialogDeleteVisible:!1,currentRow:{}}},created:function(){},mounted:function(){this.initData()},computed:Object(i["a"])({},Object(o["d"])(["userInfo","restaurantInfo"])),components:{headTop:l["a"]},methods:{initData:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r,s,i,l,o,c,u,b,p,f,h,g=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d["o"])({restaurantId:this.userInfo.restaurantId});case 3:t=e.sent,a=[],n=!0,r=!1,s=void 0,e.prev=8,i=t.data[Symbol.iterator]();case 10:if(n=(l=i.next()).done){e.next=34;break}for(o=l.value,c=!0,u=!1,b=void 0,e.prev=15,p=o.extras[Symbol.iterator]();!(c=(f=p.next()).done);c=!0)h=f.value,h.categoryName=o.name,a.push(h);e.next=23;break;case 19:e.prev=19,e.t0=e["catch"](15),u=!0,b=e.t0;case 23:e.prev=23,e.prev=24,c||null==p.return||p.return();case 26:if(e.prev=26,!u){e.next=29;break}throw b;case 29:return e.finish(26);case 30:return e.finish(23);case 31:n=!0,e.next=10;break;case 34:e.next=40;break;case 36:e.prev=36,e.t1=e["catch"](8),r=!0,s=e.t1;case 40:e.prev=40,e.prev=41,n||null==i.return||i.return();case 43:if(e.prev=43,!r){e.next=46;break}throw s;case 46:return e.finish(43);case 47:return e.finish(40);case 48:this.count=t.count,this.tableData=a,this.listLoading=!1,this.$nextTick(function(){g.setSort()}),e.next=57;break;case 54:e.prev=54,e.t2=e["catch"](0),console.log("获取数据失败",e.t2);case 57:case"end":return e.stop()}},e,this,[[0,54],[8,36,40,48],[15,19,23,31],[24,,26,30],[41,,43,47]])}));function t(){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){this.currentPage=e,this.offset=(e-1)*this.limit,this.getMenu()},handleEdit:function(e){this.getSelectItemData(e,"edit"),this.dialogFormVisible=!0},getSelectItemData:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.selectTable=Object(i["a"])({},t,{restaurantName:this.restaurantInfo.name,restaurantAddress:this.restaurantInfo.address,categoryName:t.categoryName}),this.selectMenu={label:t.categoryName,value:t.extraCategoryId},this.initData();case 3:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),handleDelete:function(e){this.currentRow=e,this.dialogDeleteVisible=!0},confirmDeleteButton:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d["h"])({extraId:this.currentRow.extraId});case 3:t=e.sent,this.$message({type:"success",message:t.message}),this.dialogDeleteVisible=!1,this.tableData=this.tableData.filter(function(e){return e.extraId!==a.currentRow.extraId}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.$message({type:"error",message:e.t0.message});case 12:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}(),updateExtra:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.dialogFormVisible=!1,e.prev=1,t={newExtraCategoryId:this.selectMenu.value},a=Object(i["a"])({},this.selectTable,t),e.next=6,Object(d["z"])(a);case 6:n=e.sent,this.$message({type:"success",message:n.message}),this.initData(),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),console.log("更新餐馆信息失败",e.t0);case 14:case"end":return e.stop()}},e,this,[[1,11]])}));function t(){return e.apply(this,arguments)}return t}(),setSort:function(){var e=this,t=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=u["a"].create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(a){var n,r,s,l;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.tableData[a.oldIndex],r=e.tableData[a.newIndex],s=e.tableData.splice(a.oldIndex,1)[0],e.tableData.splice(a.newIndex,0,s),a.newIndex===a.oldIndex){t.next=11;break}return t.next=7,Object(d["A"])(Object(i["a"])({},n,{newExtraCategoryId:r.extraCategoryId,newExtraId:r.extraId}));case 7:return l=t.sent,e.$message({type:"success",message:l.message}),t.next=11,e.initData();case 11:case"end":return t.stop()}},t)}));function a(e){return t.apply(this,arguments)}return a}()})}}},p=b,f=(a("9ab2"),a("951b"),a("2877")),h=Object(f["a"])(p,n,r,!1,null,null,null);t["default"]=h.exports},b1ee:function(e,t,a){}}]);
//# sourceMappingURL=extraList.8b2e97ad.js.map