(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["addGoods"],{"51be":function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return a});var o="//localhost:4000",a="";o="//pos.migaox.com",a="http://pos.migaox.com/img/"},6033:function(e,t,r){"use strict";var o=r("a4f4"),a=r.n(o);a.a},a4f4:function(e,t,r){},a7aa:function(e,t,r){"use strict";var o=r("c82e"),a=r.n(o);a.a},c82e:function(e,t,r){},cc54:function(e,t,r){"use strict";var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header_container"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/manage/home"}}},[e._v("首页")]),e._l(e.$route.meta,function(t,o){return r("el-breadcrumb-item",{key:o},[e._v(e._s(t))])})],2),r("el-dropdown",{attrs:{"menu-align":"start"},on:{command:e.handleCommand}},[r("img",{staticClass:"avator",attrs:{src:e.imgBaseUrl+e.userInfo.avatar}}),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"home"}},[e._v("首页")]),r("el-dropdown-item",{attrs:{command:"signout"}},[e._v("退出")])],1)],1)],1)},a=[],s=r("cebc"),n=r("51be"),c=r("2f62"),i={data:function(){return{imgBaseUrl:n["b"]}},created:function(){},computed:Object(s["a"])({},Object(c["d"])(["userInfo"])),methods:Object(s["a"])({},Object(c["c"])(["RESET_STATE"]),{handleCommand:function(e){var t=this;"home"==e?this.$router.push("/home"):"signout"==e&&this.$confirm("是否退出?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"退出成功"}),window.localStorage.clear(),t.RESET_STATE(),t.$router.push("/")}).catch(function(e){})}})},l=i,m=(r("6033"),r("2877")),u=Object(m["a"])(l,o,a,!1,null,null,null);t["a"]=u.exports},fd2f:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("head-top"),r("el-row",{staticStyle:{"margin-top":"80px"}},[r("el-col",{attrs:{span:14,offset:4}},[r("header",{staticClass:"form_header"},[e._v("选择食品种类")]),r("el-form",{ref:"categoryForm",staticClass:"form",attrs:{model:e.categoryForm,rules:e.categoryRules,"label-width":"110px"}},[r("el-row",{staticClass:"category_select"},[r("el-form-item",{attrs:{label:"食品种类",prop:"name"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.selectValue.label},model:{value:e.categoryForm.categorySelect,callback:function(t){e.$set(e.categoryForm,"categorySelect",t)},expression:"categoryForm.categorySelect"}},e._l(e.categoryForm.categoryList,function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[r("span",[e._v(e._s(t.label))]),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"},on:{click:function(r){return e.handleDeleteCategory(t)}}},[e._v("X")])])}),1)],1)],1),r("el-row",{staticClass:"add_category_row",class:e.showAddCategory?"showEdit":""},[r("div",{staticClass:"add_category"},[r("el-form-item",{attrs:{label:"食品种类",prop:"name"}},[r("el-input",{model:{value:e.categoryForm.name,callback:function(t){e.$set(e.categoryForm,"name",t)},expression:"categoryForm.name"}})],1),r("el-form-item",{attrs:{label:"种类描述",prop:"description"}},[r("el-input",{model:{value:e.categoryForm.description,callback:function(t){e.$set(e.categoryForm,"description",t)},expression:"categoryForm.description"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitcategoryForm("categoryForm")}}},[e._v("提交")])],1)],1)]),r("div",{staticClass:"add_category_button",on:{click:e.addCategoryFun}},[e.showAddCategory?r("i",{staticClass:"el-icon-caret-top edit_icon"}):r("i",{staticClass:"el-icon-caret-bottom edit_icon",attrs:{slot:"icon"},slot:"icon"}),r("span",[e._v("添加食品种类")])])],1),r("header",{staticClass:"form_header"},[e._v("添加食品")]),r("el-form",{ref:"foodForm",staticClass:"form food_form",attrs:{model:e.foodForm,rules:e.foodRules,"label-width":"110px"}},[r("el-form-item",{attrs:{label:"食品名称",prop:"name"}},[r("el-input",{model:{value:e.foodForm.name,callback:function(t){e.$set(e.foodForm,"name",t)},expression:"foodForm.name"}})],1),r("el-form-item",{attrs:{label:"食品详情",prop:"description"}},[r("el-input",{model:{value:e.foodForm.description,callback:function(t){e.$set(e.foodForm,"description",t)},expression:"foodForm.description"}})],1),r("el-form-item",{attrs:{label:"食品规格"}},[r("el-radio",{staticClass:"radio",attrs:{label:"one"},model:{value:e.foodSpecs,callback:function(t){e.foodSpecs=t},expression:"foodSpecs"}},[e._v("单规格")]),r("el-radio",{staticClass:"radio",attrs:{label:"more"},model:{value:e.foodSpecs,callback:function(t){e.foodSpecs=t},expression:"foodSpecs"}},[e._v("多规格")])],1),"one"==e.foodSpecs?r("el-row",[r("el-form-item",{attrs:{label:"价格"}},[r("el-input-number",{attrs:{precision:2,step:.1,min:0,max:1e3},model:{value:e.foodForm.specs[0].price,callback:function(t){e.$set(e.foodForm.specs[0],"price",t)},expression:"foodForm.specs[0].price"}})],1)],1):r("el-row",{staticStyle:{overflow:"auto","text-align":"center"}},[r("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加规格")]),r("el-table",{staticStyle:{"margin-bottom":"20px"},attrs:{data:e.foodForm.specs,"row-class-name":e.tableRowClassName}},[r("el-table-column",{attrs:{prop:"specs",label:"规格"}}),r("el-table-column",{attrs:{prop:"price",label:"价格"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index)}}},[e._v("删除")])]}}])})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addFood("foodForm")}}},[e._v("确认添加食品")])],1)],1),r("el-dialog",{attrs:{title:"添加规格",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{attrs:{rules:e.specsFormrules,model:e.specsForm}},[r("el-form-item",{attrs:{label:"规格","label-width":"100px",prop:"specs"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.specsForm.specs,callback:function(t){e.$set(e.specsForm,"specs",t)},expression:"specsForm.specs"}})],1),r("el-form-item",{attrs:{label:"价格","label-width":"100px"}},[r("el-input-number",{attrs:{precision:2,step:.1,min:0,max:1e4},model:{value:e.specsForm.price,callback:function(t){e.$set(e.specsForm,"price",t)},expression:"specsForm.price"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addspecs}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"提示",visible:e.dialogDeleteCategoryVisible,width:"30%",center:""},on:{"update:visible":function(t){e.dialogDeleteCategoryVisible=t}}},[r("span",[e._v('删除"'+e._s(e.currentCategory.name)+'"类目,将删除类目下的所有食品,确定要删除吗?')]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogDeleteCategoryVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"danger"},on:{click:e.confirmDeleteCategoryButton}},[e._v("删 除")])],1)])],1)],1)],1)},a=[],s=(r("7f7f"),r("96cf"),r("3b8d")),n=r("cebc"),c=r("cc54"),i=r("2f62"),l=r("aac5"),m=r("51be"),u={props:["menu"],data:function(){return{baseUrl:m["a"],imgBaseUrl:m["b"],restaurant_id:null,categoryForm:{categoryList:[],categorySelect:"",name:"",description:""},foodForm:{name:"",description:"",specs:[{specs:"默认",price:0}]},foodRules:{name:[{required:!0,message:"请输入食品名称",trigger:"blur"}]},categoryRules:{name:[{required:!0,message:"请选择类别",trigger:"blur"}]},showAddCategory:!1,foodSpecs:"one",dialogFormVisible:!1,specsForm:{specs:"",price:0},specsFormrules:{specs:[{required:!0,message:"请输入规格",trigger:"blur"}]},dialogDeleteCategoryVisible:!1,currentCategory:{}}},components:{headTop:c["a"]},created:function(){},mounted:function(){this.initData()},computed:Object(n["a"])({},Object(i["d"])(["userInfo","restaurantInfo"]),{selectValue:function(){return this.categoryForm.categoryList[this.categoryForm.categorySelect]||{}}}),methods:{initData:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l["m"])({restaurantId:this.userInfo.restaurantId});case 3:t=e.sent,t.data.map(function(e,t){e.value=t,e.label=e.name}),this.categoryForm.categoryList=t.data,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$message({type:"error",message:"获取食品分类失败"});case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),addCategoryFun:function(){this.showAddCategory=!this.showAddCategory},submitcategoryForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(r){var o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=19;break}return o={name:t.categoryForm.name,description:t.categoryForm.description,restaurantId:t.userInfo.restaurantId},e.prev=2,e.next=5,Object(l["a"])(o);case 5:return e.sent,e.next=8,t.initData();case 8:t.categoryForm.name="",t.categoryForm.description="",t.showAddCategory=!1,t.$message({type:"success",message:"添加成功"}),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](2),t.$message({type:"error",message:e.t0});case 17:e.next=21;break;case 19:return t.$message({type:"error",message:"请检查输入是否正确"}),e.abrupt("return",!1);case 21:case"end":return e.stop()}},e,null,[[2,14]])}));return function(t){return e.apply(this,arguments)}}())},addspecs:function(){this.foodForm.specs.push(Object(n["a"])({},this.specsForm)),this.specsForm.specs="",this.specsForm.price=0,this.dialogFormVisible=!1},handleDelete:function(e){this.foodForm.specs.splice(e,1)},tableRowClassName:function(e,t){return 1===t?"info-row":3===t?"positive-row":""},addFood:function(e){var t=this;this.selectValue.label?this.$refs[e].validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(r){var o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=15;break}return o=Object(n["a"])({},t.foodForm,{categoryId:t.selectValue.categoryId,restaurantId:t.userInfo.restaurantId}),e.prev=2,e.next=5,Object(l["d"])(o);case 5:e.sent,t.$message({type:"success",message:"添加成功"}),t.foodForm={name:"",specs:[{specs:"默认",price:0}]},e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),console.log(e.t0);case 13:e.next=17;break;case 15:return t.$message({type:"error",message:"请检查输入是否正确"}),e.abrupt("return",!1);case 17:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t){return e.apply(this,arguments)}}()):this.$message({type:"error",message:"请填写商品分类"})},handleDeleteCategory:function(e){this.currentCategory=e,this.dialogDeleteCategoryVisible=!0},confirmDeleteCategoryButton:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l["g"])({categoryId:this.currentCategory.categoryId});case 3:t=e.sent,this.$message({type:"success",message:t.message}),this.dialogDeleteCategoryVisible=!1,this.categoryForm.categorySelect="",this.categoryForm.name="",this.categoryForm.description="",this.initData(),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),this.$message({type:"error",message:e.t0.message});case 15:case"end":return e.stop()}},e,this,[[0,12]])}));function t(){return e.apply(this,arguments)}return t}()}},d=u,p=(r("a7aa"),r("2877")),f=Object(p["a"])(d,o,a,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=addGoods.a75d5e7b.js.map