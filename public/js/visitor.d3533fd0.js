(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["visitor"],{"0733":function(e,t,a){},"1ab3":function(e,t,a){var n=a("6d8b"),i=a("2306"),r=a("e887");function o(e,t,a,n){var i=t.getData(),r=this.dataIndex,o=i.getName(r),l=t.get("selectedOffset");n.dispatchAction({type:"pieToggleSelect",from:e,name:o,seriesId:t.id}),i.each(function(e){s(i.getItemGraphicEl(e),i.getItemLayout(e),t.isSelected(i.getName(e)),l,a)})}function s(e,t,a,n,i){var r=(t.startAngle+t.endAngle)/2,o=Math.cos(r),s=Math.sin(r),l=a?n:0,c=[o*l,s*l];i?e.animate().when(200,{position:c}).start("bounceOut"):e.attr("position",c)}function l(e,t){i.Group.call(this);var a=new i.Sector({z2:2}),n=new i.Polyline,r=new i.Text;function o(){n.ignore=n.hoverIgnore,r.ignore=r.hoverIgnore}function s(){n.ignore=n.normalIgnore,r.ignore=r.normalIgnore}this.add(a),this.add(n),this.add(r),this.updateData(e,t,!0),this.on("emphasis",o).on("normal",s).on("mouseover",o).on("mouseout",s)}var c=l.prototype;c.updateData=function(e,t,a){var r=this.childAt(0),o=e.hostModel,l=e.getItemModel(t),c=e.getItemLayout(t),u=n.extend({},c);if(u.label=null,a){r.setShape(u);var h=o.getShallow("animationType");"scale"===h?(r.shape.r=c.r0,i.initProps(r,{shape:{r:c.r}},o,t)):(r.shape.endAngle=c.startAngle,i.updateProps(r,{shape:{endAngle:c.endAngle}},o,t))}else i.updateProps(r,{shape:u},o,t);var g=l.getModel("itemStyle"),p=e.getItemVisual(t,"color");r.useStyle(n.defaults({lineJoin:"bevel",fill:p},g.getModel("normal").getItemStyle())),r.hoverStyle=g.getModel("emphasis").getItemStyle();var d=l.getShallow("cursor");function f(){r.stopAnimation(!0),r.animateTo({shape:{r:c.r+o.get("hoverOffset")}},300,"elasticOut")}function m(){r.stopAnimation(!0),r.animateTo({shape:{r:c.r}},300,"elasticOut")}d&&r.attr("cursor",d),s(this,e.getItemLayout(t),l.get("selected"),o.get("selectedOffset"),o.get("animation")),r.off("mouseover").off("mouseout").off("emphasis").off("normal"),l.get("hoverAnimation")&&o.isAnimationEnabled()&&r.on("mouseover",f).on("mouseout",m).on("emphasis",f).on("normal",m),this._updateLabel(e,t),i.setHoverStyle(this)},c._updateLabel=function(e,t){var a=this.childAt(1),n=this.childAt(2),r=e.hostModel,o=e.getItemModel(t),s=e.getItemLayout(t),l=s.label,c=e.getItemVisual(t,"color");i.updateProps(a,{shape:{points:l.linePoints||[[l.x,l.y],[l.x,l.y],[l.x,l.y]]}},r,t),i.updateProps(n,{style:{x:l.x,y:l.y}},r,t),n.attr({rotation:l.rotation,origin:[l.x,l.y],z2:10});var u=o.getModel("label.normal"),h=o.getModel("label.emphasis"),g=o.getModel("labelLine.normal"),p=o.getModel("labelLine.emphasis");c=e.getItemVisual(t,"color");i.setLabelStyle(n.style,n.hoverStyle={},u,h,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:e.getName(t),autoColor:c,useInsideStyle:!!l.inside},{textAlign:l.textAlign,textVerticalAlign:l.verticalAlign,opacity:e.getItemVisual(t,"opacity")}),n.ignore=n.normalIgnore=!u.get("show"),n.hoverIgnore=!h.get("show"),a.ignore=a.normalIgnore=!g.get("show"),a.hoverIgnore=!p.get("show"),a.setStyle({stroke:c,opacity:e.getItemVisual(t,"opacity")}),a.setStyle(g.getModel("lineStyle").getLineStyle()),a.hoverStyle=p.getModel("lineStyle").getLineStyle();var d=g.get("smooth");d&&!0===d&&(d=.4),a.setShape({smooth:d})},n.inherits(l,i.Group);var u=r.extend({type:"pie",init:function(){var e=new i.Group;this._sectorGroup=e},render:function(e,t,a,i){if(!i||i.from!==this.uid){var r=e.getData(),s=this._data,c=this.group,u=t.get("animation"),h=!s,g=e.get("animationType"),p=n.curry(o,this.uid,e,u,a),d=e.get("selectedMode");if(r.diff(s).add(function(e){var t=new l(r,e);h&&"scale"!==g&&t.eachChild(function(e){e.stopAnimation(!0)}),d&&t.on("click",p),r.setItemGraphicEl(e,t),c.add(t)}).update(function(e,t){var a=s.getItemGraphicEl(t);a.updateData(r,e),a.off("click"),d&&a.on("click",p),c.add(a),r.setItemGraphicEl(e,a)}).remove(function(e){var t=s.getItemGraphicEl(e);c.remove(t)}).execute(),u&&h&&r.count()>0&&"scale"!==g){var f=r.getItemLayout(0),m=Math.max(a.getWidth(),a.getHeight())/2,v=n.bind(c.removeClipPath,c);c.setClipPath(this._createClipPath(f.cx,f.cy,m,f.startAngle,f.clockwise,v,e))}this._data=r}},dispose:function(){},_createClipPath:function(e,t,a,n,r,o,s){var l=new i.Sector({shape:{cx:e,cy:t,r0:0,r:a,startAngle:n,endAngle:n,clockwise:r}});return i.initProps(l,{shape:{endAngle:n+(r?1:-1)*Math.PI*2}},s,o),l},containPoint:function(e,t){var a=t.getData(),n=a.getItemLayout(0);if(n){var i=e[0]-n.cx,r=e[1]-n.cy,o=Math.sqrt(i*i+r*r);return o<=n.r&&o>=n.r0}}}),h=u;e.exports=h},"292e":function(e,t,a){var n=a("3842"),i=n.parsePercent,r=n.linearMap,o=a("bb70"),s=a("6d8b"),l=2*Math.PI,c=Math.PI/180;function u(e,t,a,n){t.eachSeriesByType(e,function(e){var t=e.get("center"),n=e.get("radius");s.isArray(n)||(n=[0,n]),s.isArray(t)||(t=[t,t]);var u=a.getWidth(),h=a.getHeight(),g=Math.min(u,h),p=i(t[0],u),d=i(t[1],h),f=i(n[0],g/2),m=i(n[1],g/2),v=e.getData(),y=-e.get("startAngle")*c,b=e.get("minAngle")*c,x=0;v.each("value",function(e){!isNaN(e)&&x++});var S=v.getSum("value"),w=Math.PI/(S||x)*2,I=e.get("clockwise"),M=e.get("roseType"),A=e.get("stillShowZeroSum"),L=v.getDataExtent("value");L[0]=0;var D=l,P=0,_=y,N=I?1:-1;if(v.each("value",function(e,t){var a;if(isNaN(e))v.setItemLayout(t,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:I,cx:p,cy:d,r0:f,r:M?NaN:m});else{a="area"!==M?0===S&&A?w:e*w:l/x,a<b?(a=b,D-=b):P+=e;var n=_+N*a;v.setItemLayout(t,{angle:a,startAngle:_,endAngle:n,clockwise:I,cx:p,cy:d,r0:f,r:M?r(e,L,[f,m]):m}),_=n}},!0),D<l&&x)if(D<=.001){var T=l/x;v.each("value",function(e,t){if(!isNaN(e)){var a=v.getItemLayout(t);a.angle=T,a.startAngle=y+N*t*T,a.endAngle=y+N*(t+1)*T}})}else w=D/P,_=y,v.each("value",function(e,t){if(!isNaN(e)){var a=v.getItemLayout(t),n=a.angle===b?b:e*w;a.startAngle=_,a.endAngle=_+N*n,_+=N*n}});o(e,m,u,h)})}e.exports=u},"6da6":function(e,t,a){"use strict";var n=a("0733"),i=a.n(n);i.a},7023:function(e,t,a){var n=a("6d8b"),i={updateSelectedMap:function(e){this._targetList=e.slice(),this._selectTargetMap=n.reduce(e||[],function(e,t){return e.set(t.name,t),e},n.createHashMap())},select:function(e,t){var a=null!=t?this._targetList[t]:this._selectTargetMap.get(e),n=this.get("selectedMode");"single"===n&&this._selectTargetMap.each(function(e){e.selected=!1}),a&&(a.selected=!0)},unSelect:function(e,t){var a=null!=t?this._targetList[t]:this._selectTargetMap.get(e);a&&(a.selected=!1)},toggleSelected:function(e,t){var a=null!=t?this._targetList[t]:this._selectTargetMap.get(e);if(null!=a)return this[a.selected?"unSelect":"select"](e,t),a.selected},isSelected:function(e,t){var a=null!=t?this._targetList[t]:this._selectTargetMap.get(e);return a&&a.selected}};e.exports=i},7782:function(e,t,a){var n=a("3eba"),i=a("6d8b");function r(e,t){i.each(t,function(t){t.update="updateView",n.registerAction(t,function(a,n){var i={};return n.eachComponent({mainType:"series",subType:e,query:a},function(e){e[t.method]&&e[t.method](a.name,a.dataIndex);var n=e.getData();n.each(function(t){var a=n.getName(t);i[a]=e.isSelected(a)||!1})}),{name:a.name,selected:i}})})}e.exports=r},"98e7":function(e,t){function a(e,t){var a={};t.eachRawSeriesByType(e,function(e){var n=e.getRawData(),i={};if(!t.isSeriesFiltered(e)){var r=e.getData();r.each(function(e){var t=r.getRawIndex(e);i[t]=e}),n.each(function(t){var o=i[t],s=null!=o&&r.getItemVisual(o,"color",!0);if(s)n.setItemVisual(t,"color",s);else{var l=n.getItemModel(t),c=l.get("itemStyle.normal.color")||e.getColorFromPalette(n.getName(t),a);n.setItemVisual(t,"color",c),null!=o&&r.setItemVisual(o,"color",c)}})}})}e.exports=a},bb70:function(e,t,a){var n=a("e86a");function i(e,t,a,n,i,r,o){function s(t,a,n,i){for(var r=t;r<a;r++)if(e[r].y+=n,r>t&&r+1<a&&e[r+1].y>e[r].y+e[r].height)return void l(r,n/2);l(a-1,n/2)}function l(t,a){for(var n=t;n>=0;n--)if(e[n].y-=a,n>0&&e[n].y>e[n-1].y+e[n-1].height)break}function c(e,t,a,n,i,r){for(var o=t?Number.MAX_VALUE:0,s=0,l=e.length;s<l;s++)if("center"!==e[s].position){var c=Math.abs(e[s].y-n),u=e[s].len,h=e[s].len2,g=c<i+u?Math.sqrt((i+u+h)*(i+u+h)-c*c):Math.abs(e[s].x-a);t&&g>=o&&(g=o-10),!t&&g<=o&&(g=o+10),e[s].x=a+g*r,o=g}}e.sort(function(e,t){return e.y-t.y});for(var u,h=0,g=e.length,p=[],d=[],f=0;f<g;f++)u=e[f].y-h,u<0&&s(f,g,-u,i),h=e[f].y+e[f].height;o-h<0&&l(g-1,h-o);for(f=0;f<g;f++)e[f].y>=a?d.push(e[f]):p.push(e[f]);c(p,!1,t,a,n,i),c(d,!0,t,a,n,i)}function r(e,t,a,n,r,o){for(var s=[],l=[],c=0;c<e.length;c++)e[c].x<t?s.push(e[c]):l.push(e[c]);i(l,t,a,n,1,r,o),i(s,t,a,n,-1,r,o);for(c=0;c<e.length;c++){var u=e[c].linePoints;if(u){var h=u[1][0]-u[2][0];e[c].x<t?u[2][0]=e[c].x+3:u[2][0]=e[c].x-3,u[1][1]=u[2][1]=e[c].y,u[1][0]=u[2][0]+h}}}function o(e,t,a,i){var o,s,l=e.getData(),c=[],u=!1;l.each(function(a){var i,r,h,g,p=l.getItemLayout(a),d=l.getItemModel(a),f=d.getModel("label.normal"),m=f.get("position")||d.get("label.emphasis.position"),v=d.getModel("labelLine.normal"),y=v.get("length"),b=v.get("length2"),x=(p.startAngle+p.endAngle)/2,S=Math.cos(x),w=Math.sin(x);o=p.cx,s=p.cy;var I="inside"===m||"inner"===m;if("center"===m)i=p.cx,r=p.cy,g="center";else{var M=(I?(p.r+p.r0)/2*S:p.r*S)+o,A=(I?(p.r+p.r0)/2*w:p.r*w)+s;if(i=M+3*S,r=A+3*w,!I){var L=M+S*(y+t-p.r),D=A+w*(y+t-p.r),P=L+(S<0?-1:1)*b,_=D;i=P+(S<0?-5:5),r=_,h=[[M,A],[L,D],[P,_]]}g=I?"center":S>0?"left":"right"}var N=f.getFont(),T=f.get("rotate")?S<0?-x+Math.PI:-x:0,O=e.getFormattedLabel(a,"normal")||l.getName(a),k=n.getBoundingRect(O,N,g,"top");u=!!T,p.label={x:i,y:r,position:m,height:k.height,len:y,len2:b,linePoints:h,textAlign:g,verticalAlign:"middle",rotation:T,inside:I},I||c.push(p.label)}),!u&&e.get("avoidLabelOverlap")&&r(c,o,s,t,a,i)}e.exports=o},c037:function(e,t,a){var n=a("3eba"),i=a("6d8b");a("f7c6"),a("1ab3");var r=a("7782"),o=a("98e7"),s=a("292e"),l=a("d3f47");r("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),n.registerVisual(i.curry(o,"pie")),n.registerLayout(i.curry(s,"pie")),n.registerProcessor(i.curry(l,"pie"))},d3f47:function(e,t){function a(e,t){var a=t.findComponents({mainType:"legend"});a&&a.length&&t.eachSeriesByType(e,function(e){var t=e.getData();t.filterSelf(function(e){for(var n=t.getName(e),i=0;i<a.length;i++)if(!a[i].isSelected(n))return!1;return!0},this)},this)}e.exports=a},e023:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("head-top"),a("visitor-pie",{attrs:{pieData:e.pieData}})],1)},i=[],r=(a("96cf"),a("3b8d")),o=a("cc54"),s=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"visitorpie"},[a("div",{staticStyle:{width:"90%",height:"450px"},attrs:{id:"visitorpie"}})])}],c=a("3eba"),u=a.n(c),h=(a("c037"),a("627c"),a("d28f"),{mounted:function(){this.myChart=u.a.init(document.getElementById("visitorpie")),this.initData()},props:["pieData"],methods:{initData:function(){var e={title:{text:"用户分布",subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["北京","上海","深圳","杭州","其他"]},series:[{name:"访问来源",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:this.pieData.beijing,name:"北京"},{value:this.pieData.shanghai,name:"上海"},{value:this.pieData.shenzhen,name:"深圳"},{value:this.pieData.hangzhou,name:"杭州"},{value:this.pieData.qita,name:"其他"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};this.myChart.setOption(e)}},watch:{pieData:function(){this.initData()}}}),g=h,p=(a("6da6"),a("2877")),d=Object(p["a"])(g,s,l,!1,null,null,null),f=d.exports,m={data:function(){return{pieData:{}}},components:{headTop:o["a"],visitorPie:f},mounted:function(){this.initData()},methods:{initData:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,getUserCity();case 3:if(t=e.sent,1!=t.status){e.next=8;break}this.pieData=t.user_city,e.next=9;break;case 8:throw new Error(t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log("获取用户分布信息失败",e.t0);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));function t(){return e.apply(this,arguments)}return t}()}},v=m,y=(a("f0ba"),Object(p["a"])(v,n,i,!1,null,null,null));t["default"]=y.exports},e49b:function(e,t,a){},f0ba:function(e,t,a){"use strict";var n=a("e49b"),i=a.n(n);i.a},f7c6:function(e,t,a){var n=a("3eba"),i=a("6179"),r=a("6d8b"),o=a("e0d3"),s=a("3842"),l=s.getPercentWithPrecision,c=a("862d"),u=a("7023"),h=n.extendSeriesModel({type:"series.pie",init:function(e){h.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()},this.updateSelectedMap(e.data),this._defaultLabelLine(e)},mergeOption:function(e){h.superCall(this,"mergeOption",e),this.updateSelectedMap(this.option.data)},getInitialData:function(e,t){var a=c(["value"],e.data),n=new i(a,this);return n.initData(e.data),n},getDataParams:function(e){var t=this.getData(),a=h.superCall(this,"getDataParams",e),n=[];return t.each("value",function(e){n.push(e)}),a.percent=l(n,e,t.hostModel.get("percentPrecision")),a.$vars.push("percent"),a},_defaultLabelLine:function(e){o.defaultEmphasis(e.labelLine,["show"]);var t=e.labelLine.normal,a=e.labelLine.emphasis;t.show=t.show&&e.label.normal.show,a.show=a.show&&e.label.emphasis.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,label:{normal:{rotate:!1,show:!0,position:"outer"},emphasis:{}},labelLine:{normal:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}}},itemStyle:{normal:{borderWidth:1},emphasis:{}},animationType:"expansion",animationEasing:"cubicOut",data:[]}});r.mixin(h,u);var g=h;e.exports=g}}]);
//# sourceMappingURL=visitor.d3533fd0.js.map